#include <reg51.h>
#define uchar unsigned char	 //宏的定义变量类型 uchar 代替 unsigned char
#define uint  unsigned int	 //宏的定义变量类型 uint  代替 unsigned int
uchar  dis_buf;            //显示缓存
uchar  temp;
uchar  key,a,b,c,d,e,f,g,h,k,m,n,p,q,r,s,t,bb,cc;                //键顺序码
void delay(uchar x);      //x*0.14MS

#define LCDLCDDisp_Off   0x3e
#define LCDLCDDisp_On    0x3f
#define Page_Add     0xb8//页地址
#define LCDCol_Add     0x40//列地址
#define Start_Line     0xC0//行地址
/*****液晶显示器的端口定义*****/
#define data_ora P0 /*液晶数据总线*/
sbit LCDMcs=P2^1 ;    /*片选1*/
sbit LCDScs=P2^2 ;    /*片选2*/
sbit RESET=P2^3 ;  /*复位信号*/
sbit LCDDi=P2^4 ;     /*数据/指令 选择*/
sbit LCDRW=P2^5 ;     /*读/写 选择*/
sbit LCDEnable=P2^6 ;     /*读/写 使能*/
sbit led_up=P3^4 ;
sbit led_dn=P3^5 ;

sbit IN1=P3^0;
sbit IN2=P3^1; 
sbit IN3=P3^2;
sbit IN4=P3^3;

sbit key2=P2^0;
sbit bell=P3^6;
sbit LED_BJ=P3^7;
unsigned int Num0=0,Num1=0,Num2=0,Num3=0,Num4=0,Num5=0,Num6=0;
bit flag0,flag_up,flag_dn,flag_door,flag_keyoff,flag_bb,flag_cc,flag1,flag2,flag3,flag4,flag5,flag6,flag7,flag8,flag9;
bit flag_1_up, flag_2_up,flag_2_dn, flag_3_up,flag_3_dn,flag_4_dn;

unsigned char code Bmp0[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板! /已选楼层
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
------------------------------------------------------------------------------*/
0x00,0x02,0xF2,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0xFF,0x02,0x00,0x00,0x00,
0x40,0x42,0x44,0xCC,0x00,0x60,0x5E,0x48,0xC8,0x7F,0xC8,0x48,0x4C,0x68,0x40,0x00,
0x10,0x10,0xD0,0xFF,0x50,0x90,0x52,0x34,0x10,0xFF,0x10,0x34,0x52,0xD8,0x10,0x00,
0x00,0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0xD2,0x92,0x1F,0x02,0x00,
0x00,0x00,0x3F,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x78,0x00,0x00,
0x00,0x40,0x20,0x1F,0x20,0x60,0x90,0x8C,0x83,0x80,0x8F,0x90,0x90,0xD0,0x5C,0x00,
0x04,0x03,0x00,0xFF,0x02,0x82,0x8A,0x56,0x53,0x22,0x52,0x52,0x8E,0x02,0x02,0x00,
0x80,0x40,0x30,0x0F,0x44,0x64,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC6,0x04,0x00
};
unsigned char code Bmp1[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/当前楼层
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x40,0x42,0x44,0x4C,0x40,0x40,0x7F,0x40,0x40,0x48,0x44,0xE6,0x40,0x00,0x00,
0x08,0x08,0xE8,0x29,0x2A,0x2E,0xE8,0x08,0x08,0xCC,0x0A,0x0B,0xE8,0x0C,0x08,0x00,
0x10,0x10,0xD0,0xFF,0x50,0x90,0x52,0x34,0x10,0xFF,0x10,0x34,0x52,0xD8,0x10,0x00,
0x00,0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0xD2,0x92,0x1F,0x02,0x00,
0x00,0x40,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0xFF,0x00,0x00,0x00,
0x00,0x00,0xFF,0x09,0x49,0x89,0x7F,0x00,0x00,0x0F,0x40,0x80,0x7F,0x00,0x00,0x00,
0x04,0x03,0x00,0xFF,0x02,0x82,0x8A,0x56,0x53,0x22,0x52,0x52,0x8E,0x02,0x02,0x00,
0x80,0x40,0x30,0x0F,0x44,0x64,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC6,0x04,0x00
};
unsigned char code Bmp2[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/升降状态
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x80,0x84,0x84,0x84,0x84,0xFE,0x82,0x83,0x82,0x80,0xFF,0x80,0x80,0xC0,0x80,0x00,
0x00,0xFE,0x02,0x22,0xDA,0x06,0x88,0x44,0x57,0xA4,0x54,0x4C,0x84,0x80,0x80,0x00,
0x00,0x08,0x30,0x00,0xFF,0x20,0x20,0x20,0x20,0xFF,0x20,0x22,0x24,0x30,0x20,0x00,
0x04,0x04,0x84,0x84,0x44,0x24,0x54,0x8F,0x14,0x24,0x44,0x44,0x84,0x86,0x84,0x00,
0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,
0x00,0xFF,0x08,0x10,0x08,0x07,0x10,0x1E,0x12,0xFF,0x12,0x12,0x18,0x11,0x00,0x00,
0x08,0x0C,0x02,0x01,0xFF,0x40,0x20,0x1C,0x03,0x00,0x03,0x0C,0x30,0x60,0x20,0x00,
0x01,0x21,0x1C,0x00,0x3C,0x40,0x42,0x4C,0x40,0x40,0x70,0x04,0x08,0x31,0x00,0x00
};
unsigned char code Bmp3[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/开门状态
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x80,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x83,0xC2,0x80,0x00,
0x00,0xFC,0x01,0x02,0x06,0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0xFF,0x02,0x00,
0x00,0x08,0x30,0x00,0xFF,0x20,0x20,0x20,0x20,0xFF,0x20,0x22,0x24,0x30,0x20,0x00,
0x04,0x04,0x84,0x84,0x44,0x24,0x54,0x8F,0x14,0x24,0x44,0x44,0x84,0x86,0x84,0x00,
0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,
0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x80,0x7F,0x00,0x00,
0x08,0x0C,0x02,0x01,0xFF,0x40,0x20,0x1C,0x03,0x00,0x03,0x0C,0x30,0x60,0x20,0x00,
0x01,0x21,0x1C,0x00,0x3C,0x40,0x42,0x4C,0x40,0x40,0x70,0x04,0x08,0x31,0x00,0x00
};
unsigned char code Bmp4[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  上升  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x20,0x20,0x20,0x30,0x20,0x00,0x00,0x00,
0x80,0x84,0x84,0x84,0x84,0xFE,0x82,0x83,0x82,0x80,0xFF,0x80,0x80,0xC0,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x7F,0x40,0x40,0x40,0x40,0x40,0x60,0x40,0x00,
0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp5[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  下降  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x02,0x02,0x02,0x02,0x02,0xFE,0x02,0x22,0x42,0x82,0x82,0x02,0x03,0x02,0x00,
0x00,0xFE,0x02,0x22,0xDA,0x06,0x88,0x44,0x57,0xA4,0x54,0x4C,0x84,0x80,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,
0x00,0xFF,0x08,0x10,0x08,0x07,0x10,0x1E,0x12,0xFF,0x12,0x12,0x18,0x11,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp6[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  打开  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x10,0x10,0x10,0xFF,0x90,0x50,0x08,0x08,0x08,0x08,0xF8,0x08,0x08,0x0C,0x08,0x00,
0x80,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x83,0xC2,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x02,0x42,0x81,0x7F,0x00,0x00,0x00,0x00,0x40,0x80,0x7F,0x00,0x00,0x00,0x00,0x00,
0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp7[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  关闭  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x10,0x10,0x11,0x12,0x1C,0x10,0xF0,0x10,0x18,0x14,0x13,0x1A,0x90,0x00,0x00,
0x00,0xF8,0x01,0x22,0x26,0x20,0x22,0xA2,0xFA,0x22,0x32,0x22,0x02,0xFF,0x02,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x81,0x81,0x41,0x41,0x21,0x11,0x0D,0x03,0x0D,0x11,0x21,0x21,0x41,0xC1,0x41,0x00,
0x00,0xFF,0x00,0x08,0x04,0x02,0x21,0x40,0x3F,0x00,0x00,0x40,0x80,0x7F,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp8[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  1 层  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x9E,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x60,0x1F,0x04,0x44,0xE4,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC4,0x04,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00

};
unsigned char code Bmp9[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  2 层  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x9E,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x60,0x1F,0x04,0x44,0xE4,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC4,0x04,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00

};
unsigned char code Bmp10[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  3 层  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x9E,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x60,0x1F,0x04,0x44,0xE4,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC4,0x04,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp11[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  4 层  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xFE,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x9E,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x60,0x1F,0x04,0x44,0xE4,0x54,0x4C,0x44,0x44,0x44,0x54,0x64,0xC4,0x04,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00

};
unsigned char code Bmp12[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  等待  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x08,0x44,0x47,0x4C,0x56,0x44,0xF8,0x44,0x47,0x4C,0x54,0x46,0x04,0x00,0x00,
0x00,0x10,0x88,0xC4,0x33,0x40,0x44,0x44,0x44,0x7F,0x44,0xC4,0x46,0x64,0x40,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x09,0x09,0x19,0x29,0x09,0x49,0x89,0x7F,0x09,0x0D,0x09,0x01,0x01,0x00,
0x02,0x01,0x00,0xFF,0x00,0x02,0x0A,0x32,0x02,0x42,0x82,0x7F,0x02,0x03,0x02,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
unsigned char code Bmp13[]=
{
/*------------------------------------------------------------------------------
  源文件 / 文字 : 来自剪贴板!/  暂停  
  宽×高（像素）: 64×16
  字模格式/大小 : 单色点阵液晶字模，纵向取模，字节倒序/256字节
  数据转换日期  : 2018-6-22 
  ------------------------------------------------------------------------------*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x40,0x52,0x5A,0x57,0xFA,0x52,0x52,0x80,0x7E,0x12,0x12,0xF2,0x11,0x19,0x10,0x00,
0x40,0x20,0xF8,0x07,0x00,0x04,0x74,0x54,0x55,0x56,0x54,0x54,0x76,0x04,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0xFC,0x55,0x54,0x55,0x54,0x54,0x54,0x54,0xFF,0x04,0x00,0x00,0x00,
0x00,0x00,0xFF,0x04,0x03,0x01,0x05,0x45,0x85,0x7D,0x05,0x05,0x01,0x05,0x03,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};


void system_Ini()
{
     TMOD = 0x00; //选择模式0  13位计数 最大计数8192
	 TH0 = (8192 - 1000)/32;
	 TL0 = (8192 - 1000)%32	;
     IE = 0x8A;   //中断	
     TR0  = 1;    //开启T0定时器
}



void  delay(uchar x)
{ uchar j;
    while((x--)!=0)  //CPU执行x*12次
    { for(j=0;j<125;j++)
         {;}
    }
}

 void  keyscan(void)
 { 	temp = 0;
    P1=0xF0;                 //高四位输入   列为高电平  行为低电平
    delay(1);				 //延时
	temp=P1;                 //读P1口 
    temp=temp&0xF0;			 //屏蔽低四位
    temp=~((temp>>4)|0xF0);	  
    if(temp==1)	  // p1.4 被拉低
        key=1;  //第1个按键键值
    else if(temp==2)   // p1.5 被拉低
        key=2;	  //第2个按键键值
    else if(temp==4)   // p1.6 被拉低
        key=3;	 //第3个按键键值
    else if(temp==8)   // p1.7 被拉低
         key=4;	  //第4个按键键值
	else
	   key = 0;	 //16
        
    P1=0x0F;             //低四位输入  行为高电平 列为低电平
    delay(1);			 //延时
	temp=P1;             //读P1口       
    temp=temp&0x0F;
    temp=~(temp|0xF0);
	 if(temp==1)
		key=key+0;
    else if(temp==2)		   //第一行  p1.1  被拉低(直接temp==2 是因为我们P1.0空的，是3*4的矩阵键盘)
        key=key+4; 
    else if(temp==4)   //第二行  p1.2  被拉低
        key=key+8;
    else if(temp==8)   //第三行 p1.3  被拉低
        key=key+12;
	else
	  key = 0;
 
    	
     dis_buf = key;	    //键值入显示缓存
     dis_buf = dis_buf & 0x0f;
 
 }
  void  keydown(void)
 {  
  	P1=0xF0;       //将高4位全部置1 低四位全部置0
	if(P1!=0xF0)  //判断按键是否按下 如果按钮按下 会拉低P1其中的一个端口
	{
	  keyscan();  //调用按键扫描程序
    }
 }
/****************************************************************************
函数功能:LCD延时程序
入口参数:t
出口参数:
****************************************************************************/
void LCDdelay(unsigned int t)
{
	unsigned int i,j;
	for(i=0;i<t;i++);
	for(j=0;j<10;j++);
}
/****************************************************************************
状态检查，LCD是否忙


*****************************************************************************/
void CheckState()		
{
   unsigned char dat,DATA;//状态信息（判断是否忙）
   LCDDi=0; // 数据\指令选择，D/I（RS）="L" ，表示 DB7∽DB0 为显示指令数据 
   LCDRW=1; //R/W="H" ，E="H"数据被读到DB7∽DB0 
   do
   {
      DATA=0x00;
      LCDEnable=1;	//EN下降源
	  LCDdelay(2);//延时
	  dat=DATA;
      LCDEnable=0;
      dat=0x80 & dat; //仅当第7位为0时才可操作(判别busy信号)
    }
    while(!(dat==0x00));
}
/*****************************************************************************
函数功能:写命令到LCD程序，RS(DI)=L,RW=L,EN=H，即来一个脉冲写一次
入口参数:cmdcode
出口参数:
*****************************************************************************/
void write_com(unsigned char cmdcode)
{
    CheckState();//检测LCD是否忙
	LCDDi=0;
	LCDRW=0;
	P0=cmdcode;		
	LCDdelay(2);
	LCDEnable=1;
	LCDdelay(2);
	LCDEnable=0;
}
/*****************************************************************************
函数功能:LCD初始化程序
入口参数:
出口参数:
*****************************************************************************/
void init_lcd()
{
	system_Ini();
	LCDdelay(100);	
	LCDMcs=1;//刚开始关闭两屏
	LCDScs=1;
	LCDdelay(100);
	write_com(LCDLCDDisp_Off);	 //写初始化命令
	write_com(Page_Add+0);
	write_com(Start_Line+0);
	write_com(LCDCol_Add+0);
	write_com(LCDLCDDisp_On);


}
/*****************************************************************************
函数功能:写数据到LCD程序，RS(DI)=H,RW=L,EN=H，即来一个脉冲写一次
入口参数:LCDDispdata
出口参数:
*****************************************************************************/
void write_data(unsigned char LCDDispdata)
{
    CheckState();//检测LCD是否忙
	LCDDi=1;
	LCDRW=0;
	P0=LCDDispdata;
	LCDdelay(2);
	LCDEnable=1;
	LCDdelay(2);
	LCDEnable=0;
}
/*****************************************************************************
函数功能:清除LCD内存程序
入口参数:pag,col,hzk
出口参数:
*****************************************************************************/
void Clr_Scr()
{
	unsigned char j,k;
	LCDMcs=0; //左、右屏均开显示
	LCDScs=0;
 	write_com(Page_Add+0);
 	write_com(LCDCol_Add+0);
 	for(k=0;k<8;k++)//控制页数0-7，共8页
 	{
		write_com(Page_Add+k); //每页每页进行写
  		for(j=0;j<64;j++)  //每页最多可写32个中文文字或64个ASCII字符
		{
      		write_com(LCDCol_Add+j);
			write_data(0x00);//控制列数0-63，共64列，写点内容，列地址自动加1
		}
	}
}
/*****************************************************************************
函数功能:左屏位置显示
入口参数:page,column,hzk
出口参数:
*****************************************************************************/
void Bmp_Left_Disp(unsigned char page,unsigned char column, unsigned char code *Bmp)
{
	unsigned char j=0,i=0;
	for(j=0;j<2;j++)
	{
		write_com(Page_Add+page+j);
		write_com(LCDCol_Add+column);
		for(i=0;i<64;i++) 
			write_data(Bmp[128*j+i]);
	}
}
void Bmp_Left_Disp1(unsigned char page,unsigned char column, unsigned char code *Bmp)
{
	unsigned char j=0,i=0;
	for(j=0;j<2;j++)
	{
		write_com(Page_Add+page+j);
		write_com(LCDCol_Add+column);
		for(i=0;i<64;i++) 
			write_data(Bmp[64*j+i]);
	}
}


/*****************************************************************************
函数功能:右屏位置显示
入口参数:page,column,hzk
出口参数:
*****************************************************************************/
void Bmp_Right_Disp(unsigned char page,unsigned char column, unsigned char code *Bmp)
{
	unsigned char j=0,i=0;
	for(j=0;j<2;j++)
	{
		write_com(Page_Add+page+j);
		write_com(LCDCol_Add+column);
		for(i=64;i<128;i++) 
			write_data(Bmp[128*j+i]);
	}
}
void Bmp_Right_Disp1(unsigned char page,unsigned char column, unsigned char code *Bmp)
{
	unsigned char j=0,i=0;
	for(j=0;j<2;j++)
	{
		write_com(Page_Add+page+j);
		write_com(LCDCol_Add+column);
		for(i=0;i<64;i++) 
			write_data(Bmp[64*j+i]);
	}
}

void main()
{
	init_lcd();
	Clr_Scr();
	LCDMcs=0; //左屏开显示
	LCDScs=1;
	Bmp_Left_Disp1(0,0,Bmp0);
	Bmp_Left_Disp1(2,0,Bmp1);
	Bmp_Left_Disp1(4,0,Bmp2);
	Bmp_Left_Disp1(6,0,Bmp3);

    LCDMcs=1; //右屏开显示
	LCDScs=0;

	Bmp_Right_Disp1(0,0,Bmp8);
	Bmp_Right_Disp1(2,0,Bmp8);
	Bmp_Right_Disp1(4,0,Bmp12);
	Bmp_Right_Disp1(6,0,Bmp7);

	P3=0xFF;                    //置P0口
    P1=0xFF;                    //置P1口  
    delay(10);                  //延时

	led_up=1 ;
	led_dn=1 ;
	b=0;
	c=0;

	d=1;
	e=1;

	g=0; //	二楼召唤标志
	h=0; //	三楼召唤标志
	f=0; //	四楼召唤标志

	Num0=0;
	LED_BJ=1;

	while(1)
    {
		keydown();	 //调用按键判断检测程序
		a =key;
		if(a==0)
		flag_keyoff=0;

		if(a==11)
		flag_1_up=1;
		if(a==9)
		flag_2_up=1;
		if(a==10)
		flag_2_dn=1;
		if(a==7)
		flag_3_up=1;
		if(a==8)
		flag_3_dn=1;
		if(a==6)
		flag_4_dn=1;

		/*
		if(a==11&&flag_keyoff==0)		  
		{	
			flag_1_up=1;
			flag_keyoff=1;
		}*/
		if(a==11&&d==1&&e==1&&flag_door==0&&flag_up==0&&flag_dn==0)
		{
		 flag_door=1;
		 Num2=5000;
		 Bmp_Right_Disp1(6,0,Bmp6);


		 a=0;
		 		 
		}
		if((a==9||a==10)&&d==2&&e==2&&flag_door==0&&flag_up==0&&flag_dn==0)
		{
		 flag_door=1;
		 Num2=5000;
		 Bmp_Right_Disp1(6,0,Bmp6);	
		 flag_2_up=0;
		 flag_2_dn=0;
		 
	
		 a=0;
		 	 
		}
		if((a==7||a==8)&&d==3&&e==3&&flag_door==0&&flag_up==0&&flag_dn==0)
		{
		 flag_door=1;
		 Num2=5000;
		 Bmp_Right_Disp1(6,0,Bmp6);
		 flag_3_up=0;
		 flag_3_dn=0;
		 

		 a=0;		 
		}


		if(a==6&&d==4&&e==4&&flag_door==0&&flag_up==0&&flag_dn==0)
		{
		 flag_door=1;
		 Num2=5000;
		 Bmp_Right_Disp1(6,0,Bmp6);	
		 

		 a=0;
		 	 
		}
		if(d==1&&e==1&&flag_door==1)
		flag_1_up=1;
	   	if(d==2&&e==2&&flag_door==1)
		{
			flag_2_up=0;
			flag_2_dn=0;
		}
		if(d==3&&e==3&&flag_door==1)
		{
			flag_3_up=0;
			flag_3_dn=0;
		}
		if(d==4&&e==4&&flag_door==1)
		flag_4_dn=0;
		



		if(flag_door==1&&a==4)		//关门
		{
		 	flag_door=0;
			Bmp_Right_Disp1(6,0,Bmp7);
			Num2=0;
			if(flag_bb==1)
			{
			 b=bb;
			 bb=0;
			 flag_up=1;
			 Bmp_Right_Disp1(4,0,Bmp4);
			 flag_bb=0;
			}
			else if(flag_cc==1)
			{
				c=cc;
				cc=0;
				flag_dn=1;
				Bmp_Right_Disp1(4,0,Bmp5);
				flag_cc=0;
			}
		}
		if(flag_door==0&&a==5&&flag_keyoff==0&&d==e)		//开门
		{
		 	flag_door=1;
		 	Num2=5000;
		 	Bmp_Right_Disp1(6,0,Bmp6);


		 	a=0;
		}


		if(d==1&&e==1&&flag_up==0&&flag_dn==0&&(a==2||a==9||a==10)&&flag_door==0&&flag_keyoff==0)
		{
		 d=2;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 if(a==9)
		 flag_2_up=0;
		 flag_2_dn=0;


		}
		else if(d==1&&e==1&&flag_up==0&&flag_dn==0&&(a==12||a==7||a==8)&&flag_door==0&&flag_keyoff==0)
		{
		 d=3;
		 flag_up=1;
		 b=10;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==1&&e==1&&flag_up==0&&flag_dn==0&&(a==13||a==6)&&flag_door==0&&flag_keyoff==0)
		{
		 d=4;
		 flag_up=1;
		 b=15;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		}
		else if(d==2&&e==2&&flag_up==0&&flag_dn==0&&(a==12||a==7||a==8)&&flag_door==0&&flag_keyoff==0)
		{
		 d=3;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==2&&e==2&&flag_up==0&&flag_dn==0&&(a==13||a==6)&&flag_door==0&&flag_keyoff==0)
		{
		 d=4;
		 flag_up=1;
		 b=10;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		}
		else if(d==3&&e==3&&flag_up==0&&flag_dn==0&&(a==13||a==6)&&flag_door==0&&flag_keyoff==0)
		{
		 d=4;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		}
		else if(d==4&&e==4&&flag_up==0&&flag_dn==0&&(a==12||a==7||a==8)&&flag_door==0&&flag_keyoff==0)
		{
		 d=3;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==4&&e==4&&flag_up==0&&flag_dn==0&&(a==2||a==9||a==10)&&flag_door==0&&flag_keyoff==0)
		{
		 d=2;
		 flag_dn=1;
		 c=10;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_2_up=0;
		 flag_2_dn=0;
		}
		else if(d==4&&e==4&&flag_up==0&&flag_dn==0&&(a==1||a==11)&&flag_door==0&&flag_keyoff==0)
		{
		 d=1;
		 flag_dn=1;
		 c=15;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		}
		else if(d==3&&e==3&&flag_up==0&&flag_dn==0&&(a==2||a==9||a==10)&&flag_door==0&&flag_keyoff==0)
		{
		 d=2;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_2_up=0;
		 flag_2_dn=0;
		}
		else if(d==3&&e==3&&flag_up==0&&flag_dn==0&&(a==1||a==11)&&flag_door==0&&flag_keyoff==0)
		{
		 d=1;
		 flag_dn=1;
		 c=10;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		}
		else if(d==2&&e==2&&flag_up==0&&flag_dn==0&&(a==1||a==11)&&flag_door==0&&flag_keyoff==0)
		{
		 d=1;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		}

		
		if(d==4&&e==4&&flag_door==0&&(flag_3_up==1||flag_3_dn==1))
		{
		 d=3;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==4&&e==4&&flag_door==0&&(flag_2_up==1||flag_2_dn==1))
		{
		 d=2;
		 flag_dn=1;
		 c=10;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_2_up=0;
		 flag_2_dn=0;
		}
	
		else if(d==4&&e==4&&flag_door==0&&(flag_1_up==1))
		{
		 d=1;
		 flag_dn=1;
		 c=15;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		}
		else if(d==3&&e==3&&flag_door==0&&(flag_4_dn==1))
		{
		 d=4;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		}
		else if(d==3&&e==3&&flag_door==0&&(flag_2_up==1||flag_2_dn==1))
		{
		 d=2;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_2_up=0;
		 flag_2_dn=0;
		}
		else if(d==3&&e==3&&flag_door==0&&(flag_1_up==1))
		{
		 d=1;
		 flag_dn=1;
		 c=10;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		}
		else if(d==2&&e==2&&flag_door==0&&(flag_4_dn==1))
		{
		 d=4;
		 flag_up=1;
		 b=10;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		}
		 else if(d==2&&e==2&&flag_door==0&&(flag_3_up==1||flag_3_dn==1))
		{
		 d=3;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==2&&e==2&&flag_door==0&&(flag_1_up==1))
		{
		 d=1;
		 flag_dn=1;
		 c=5;
		 Bmp_Right_Disp1(0,0,Bmp8);
		 Bmp_Right_Disp1(4,0,Bmp5);
		 flag_1_up=0;
		 
		}
		else if(d==1&&e==1&&flag_door==0&&(flag_2_up==1||flag_2_dn==1))
		{
		 d=2;
		 flag_up=1;
		 b=5;
		 Bmp_Right_Disp1(0,0,Bmp9);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_2_up=0;
		 flag_2_dn=0;
		}
		else if(d==1&&e==1&&flag_door==0&&(flag_3_up==1||flag_3_dn==1))
		{
		 d=3;
		 flag_up=1;
		 b=10;
		 Bmp_Right_Disp1(0,0,Bmp10);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_3_up=0;
		 flag_3_dn=0;
		}
		else if(d==1&&e==1&&flag_door==0&&(flag_4_dn==1))
		{
		 d=4;
		 flag_up=1;
		 b=15;
		 Bmp_Right_Disp1(0,0,Bmp11);
		 Bmp_Right_Disp1(4,0,Bmp4);
		 flag_4_dn=0;
		 
		}

	   

	   	if(b)
		{
			if(Num0<200)
			{
			 	IN1=1;
				IN2=0; 
				IN3=1;
				IN4=1; 		
			}
			else if(Num0<400)
			{
			 	IN1=0;
				IN2=1; 
				IN3=1;
				IN4=1; 		
			}
			else if(Num0<600)
			{
			 	IN1=1;
				IN2=1; 
				IN3=1;
				IN4=0; 		
			}
			else if(Num0<800)
			{
			 	IN1=1;
				IN2=1; 
				IN3=0;
				IN4=1;
				 		
			}
			else if(Num0>=800)
			{
				Num0=0;
				if(b>0)
				b--;
				m++;
				if(m==5)
				{
				m=0;
				e=e+1;
				if(e==2)
				Bmp_Right_Disp1(2,0,Bmp9);
				else if(e==3)
				Bmp_Right_Disp1(2,0,Bmp10);
				else if(e==4)
				Bmp_Right_Disp1(2,0,Bmp11);
				if(b!=0&&flag_2_up==1&&e==2)
				{
				 flag_bb=1;
				 bb=b;
				 b=0;
				 flag_2_up=0;
				}
				if(b!=0&&flag_3_up==1&&e==3)
				{
				 flag_bb=1;
				 bb=b;
				 b=0;
				 flag_3_up=0;
				}


				}


				if(b==0)
				{

					IN1=1;
					IN2=1; 
					IN3=1;
					IN4=1;
					Bmp_Right_Disp1(4,0,Bmp12);
					Bmp_Right_Disp1(6,0,Bmp6);
					flag_door=1;
					Num2=5000;
					flag_up=0;

								
				}
			}
		}

		if(c)
		{
			if(Num0<200)
			{
			 	IN1=1;
				IN2=1; 
				IN3=0;
				IN4=1; 		
			}
			else if(Num0<400)
			{
			 	IN1=1;
				IN2=1; 
				IN3=1;
				IN4=0; 		
			}
			else if(Num0<600)
			{
			 	IN1=0;
				IN2=1; 
				IN3=1;
				IN4=1; 		
			}
			else if(Num0<800)
			{
			 	IN1=1;
				IN2=0; 
				IN3=1;
				IN4=1;
				 		
			}
			else if(Num0>=800)
			{
				Num0=0;
				if(c>0)
				c--;
				m++;
				if(m==5)
				{
				m=0;
				if(e>1)
				e=e-1;
				if(e==2)
				Bmp_Right_Disp1(2,0,Bmp9);
				else if(e==3)
				Bmp_Right_Disp1(2,0,Bmp10);
				else if(e==1)
				Bmp_Right_Disp1(2,0,Bmp8);
				if(c!=0&&flag_2_dn==1&&e==2)
				{
				 flag_cc=1;
				 cc=c;
				 c=0;
				 flag_2_dn=0;
				}
				if(c!=0&&flag_3_dn==1&&e==3)
				{
				 flag_cc=1;
				 cc=c;
				 c=0;
				 flag_3_dn=0;
				}
				}
				if(c==0)
				{
					IN1=1;
					IN2=1; 
					IN3=1;
					IN4=1;
					Bmp_Right_Disp1(4,0,Bmp12);
					Bmp_Right_Disp1(6,0,Bmp6);
					flag_door=1;
					Num2=5000;
					flag_dn=0;

					 
					
									
				}
			}
		}



		 //if(a==6)
		 //{
		 // 	Bmp_Right_Disp1(0,0,Bmp11);
		 //}

		


		if(a==3)
		{  		
			LED_BJ=0;
			flag0=1;
			flag1=1;		
		}
		if(key2==0)		
		flag0=1;
		else if(key2==1&&flag1==0)
		flag0=0;

		if(flag_up==1&&flag_dn==0)
		{
		 	led_up=0 ;
			led_dn=1 ; 		
		}
		else if(flag_up==0&&flag_dn==1)
		{
		 	led_up=1 ;
			led_dn=0 ; 		
		}
		else if(flag_up==0&&flag_dn==0)
		{
		 	led_up=1 ;
			led_dn=1 ; 		
		}

		
	}
}
 void T0zd(void) interrupt 1      //3定时器1的中断号  1定时器0的中断号 0外部中断1 2外部中断2  4串口中断
{

	 
	 TH0 = (8192 - 1000)/32;
	 TL0 = (8192 - 1000)%32;  
	 	 
	 Num0++;
	 Num1++;
	 if(d!=1&&e!=1&&d==e&&flag_door==0)
	 Num3++;
	 else 
	 Num3=0;
	 if(Num3>85000)	 //10秒回到一层
	 {
	 	flag_2_up=0;
		flag_2_dn=0;
		flag_3_up=0;
		flag_3_dn=0;
	 	Num3=0;
		d=1;
		flag_dn=1;
		if(e==4)
		c=15;
		else if(e==3)
		c=10;
		else if(e==2)
		c=5;
		Bmp_Right_Disp1(0,0,Bmp8);
		Bmp_Right_Disp1(4,0,Bmp5);
	 }



	 if(Num2>0)
	 {
	 Num2--;
	 if(Num2==0)
	 {
	 	flag_door=0;

		Bmp_Right_Disp1(6,0,Bmp7);
		if(flag_bb==1)
		{
			b=bb;
			bb=0;
			flag_up=1;
			Bmp_Right_Disp1(4,0,Bmp4);
			flag_bb=0;
		}
		else if(flag_cc==1)
		{
			c=cc;
			cc=0;
			flag_dn=1;
			Bmp_Right_Disp1(4,0,Bmp5);
			flag_cc=0;
		}
	 }
	 }

	 if(Num1<300)
	 {
	 if(flag0==1)
	 bell=~bell;
	 }
	 else if(Num1<1000)
	 bell=1;
	 if(Num1>1000)
	 Num1=0;

}